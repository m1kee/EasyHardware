<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
  <button class="navbar-toggler"
          type="button"
          (click)="menuBehavior.isCollapsed = !menuBehavior.isCollapsed"
          aria-controls="collapse-menu"
          [attr.aria-expanded]="!menuBehavior.isCollapsed">
    <span class="navbar-toggler-icon"></span>
  </button>

  <a class="navbar-brand" [routerLink]="['']"><b><span class="text-primary">Easy</span>&nbsp;<span class="text-white">Hardware</span></b></a>

  <div id="collapse-menu" class="collapse navbar-collapse" [collapse]="menuBehavior.isCollapsed">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item dropdown" dropdown [autoClose]="true" *ngFor="let category of categories">
        <a class="nav-link text-white" id="navbarDropdown" role="button" [routerLink]="['/product-list', category.Code]" routerLinkActive="active">
           {{ category.Name }}
          <span class="badge badge-pill badge-primary clickable" (click)="$event.stopPropagation(); $event.preventDefault();">
            <fa-icon [icon]="icons.faAngleDown" *ngIf="category.SubCategories && category.SubCategories.length > 0" dropdownToggle data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></fa-icon>
          </span>
        </a>

        <!-- SubCategory DropDown -->
        <div *ngIf="category.SubCategories && category.SubCategories.length > 0">
          <div class="dropdown-menu dropdown-menu-right"
               aria-labelledby="navbarDropdown"
               *dropdownMenu>
            <a [routerLink]="['/product-list', subCategory.Code]" routerLinkActive="active"
               class="dropdown-item clickable"
               *ngFor="let subCategory of category.SubCategories">
              {{ subCategory.Name }}
            </a>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <form id="user-menu" class="form-inline">
    <div class="btn-group" dropdown [autoClose]="false">
      <button class="btn btn-primary" type="button" dropdownToggle id="cart-button" aria-controls="shopping-cart-dropdown" style="border-radius: .25rem !important;">
        <fa-icon [icon]="icons.faShoppingCart"></fa-icon>&nbsp;
        <span class="badge badge-light"
              style="margin-left: 5px;">
          {{ getCartItems().length }}
        </span>
      </button>

      <div id="shopping-cart-dropdown" *dropdownMenu class="dropdown-menu dropdown-menu-right " role="menu" aria-labelledby="cart-button">
        <div class="cart-item pt-0 pb-0">
          <div class="row cart-title pb-2">
            <div class="col-12">
              <small>
                <b class="text-primary">
                  Carro de compras
                </b>
              </small>
              <button (click)="clearShoppingCart()" type="button" class="btn btn-xs btn-outline-danger float-right" title="Vaciar carro de compras">
                <fa-icon [icon]="icons.faBroom"></fa-icon>
              </button>
            </div>
          </div>
        </div>

        <div class="scrollable">
          <div class="cart-item text-center" *ngIf="getCartItems().length === 0">
            <small class="text-muted">
              A&uacute;n no hay items en el carrito <fa-icon [icon]="icons.faFrown"></fa-icon>
            </small>
          </div>
          <div *ngFor="let cartItem of getCartItems(); let last = last">
            <div class="cart-item">
              <div class="row">
                <div class="col-1 pr-0">
                  <small>
                    <b>
                      {{ cartItem.Count }} x
                    </b>
                  </small>
                </div>
                <div class="col-8">
                  <div class="media">
                    <img src="https://broxtechnology.com/images/iconos/box.png" style="width: 64px; height: auto;" alt="product" class="img-fluid" />
                    <div class="media-body text-wrap">
                      <span>
                        <small>
                          <b>
                            {{ cartItem.Item.Name }}
                          </b>
                        </small>
                      </span>
                      <br />
                      <small>
                        {{ cartItem.Item.Description }}
                      </small>
                    </div>
                  </div>
                </div>
                <div class="col-3 text-right">
                  <b class="text-primary"> {{ cartItem.Item.Price | currency:'CLP':'C/U $' }} </b>
                </div>
              </div>
            </div>
            <div class="dropdown-divider" *ngIf="!last"></div>
          </div>
        </div>
        <div class="cart-item">
          <div class="row cart-footer">
            <div class="col-4">
              <button type="button" class="btn btn-success btn-block">
                <fa-icon [icon]="icons.faCreditCard"></fa-icon>&nbsp;
                Pagar
              </button>
            </div>
            <div class="col-8 text-right">
              <small>
                <b>
                  TOTAL: <span class="text-primary">{{ getCartTotal() | currency:'CLP':'$' }}</span>
                </b>
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="btn-group" dropdown style="margin-left: 5px;">
      <a class="nav-link dropdown-toggle clickable text-white"
         id="navbarDropdown"
         dropdownToggle
         role="button"
         aria-controls="dropdown-animated">
        Michael Núñez
      </a>
      <div id="dropdown-animated" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="navbarDropdown">
        <a class="dropdown-item clickable" [routerLink]="['/maintenance/my-account']" routerLinkActive="active">
          <fa-icon [icon]="icons.faUserCircle" [fixedWidth]="true"></fa-icon>&nbsp;
          Mi cuenta
        </a>
        <a class="dropdown-item clickable" (click)="logout()">
          <fa-icon [icon]="icons.faSignOutAlt" [fixedWidth]="true"></fa-icon>&nbsp;
          Salir
        </a>
        <div class="dropdown-divider"></div>
        <h6 class="dropdown-header">Mantenedores</h6>
        <a class="dropdown-item clickable" [routerLink]="['/maintenance/category']" routerLinkActive="active">
          <fa-icon [icon]="icons.faList" [fixedWidth]="true"></fa-icon>&nbsp;
          Categorías
        </a>
        <a class="dropdown-item clickable" [routerLink]="['/maintenance/product']" routerLinkActive="active">
          <fa-icon [icon]="icons.faBoxOpen" [fixedWidth]="true"></fa-icon>&nbsp;
          Productos
        </a>
        <a class="dropdown-item clickable" [routerLink]="['/maintenance/store']" routerLinkActive="active">
          <fa-icon [icon]="icons.faStore" [fixedWidth]="true"></fa-icon>&nbsp;
          Tiendas
        </a>
        <a class="dropdown-item clickable" [routerLink]="['/maintenance/stock']" routerLinkActive="active">
          <fa-icon [icon]="icons.faBoxes" [fixedWidth]="true"></fa-icon>&nbsp;
          Stock
        </a>
      </div>
    </div>
  </form>
</nav>
